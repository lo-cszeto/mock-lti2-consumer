<div class="view" ng-controller="ToolsController">
    <div class="container">
        <i class="fa-li fa fa-circle-o-notch fa-spin"></i>
        <div class="row add-tool">
            <div class="col-md-5"><!-- http://ltiapps.net/test/tp.php -->
                <input class="form-control" type="text" placeholder="Tool proxy or registration url" ng-model="tool_generic_url" ng-change="checkProxy(tool_generic_url)" value="http://ltiapps.net/test/tp.php"/>
            </div>
        </div>
        <div class="jumbotron text-center" ng-if="checkingProxy || doneCheckingProxy">

            <div ng-if="checkingProxy">
                <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">
                  <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
                    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
                    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>
                  <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
                    C22.32,8.481,24.301,9.057,26.013,10.047z">
                    <animateTransform attributeType="xml"
                      attributeName="transform"
                      type="rotate"
                      from="0 20 20"
                      to="360 20 20"
                      dur="0.5s"
                      repeatCount="indefinite"/>
                  </path>
                </svg>
            </div>
            <div ng-if="doneCheckingProxy">
                <div ng-if="proxy">yes, we found a tool:</div>
                <div ng-if="!proxy">
                    <tool-pre-registration tool-url="tool_generic_url" />
                </div>
            </div>
        </div>
        <ul class="list-group" ng-if="!loading">
            <li class="list-group-item" ng-repeat="tool in tools" ng-class="tool.liClass">
                <div class="clearfix tool">
                    <div class="center-vert pull-left">
                        <div class="center-vert-content">
                            <span class="added"><i class="fa fa-cog"></i> <span>{{tool.label}}</span> <span>{{tool.launchUrl || tool.registerUrl}}</span></span>
                        </div>
                    </div>
                    <div class="center-vert pull-right">
                        <div class="center-vert-content">
                            <button type="button" class="btn btn-default action" ng-click="tool.button.onClick()">
                                <i class="fa" ng-class="tool.button.icon"></i> {{tool.button.label}}
                            </button>
                        </div>
                    </div>
                </div>
                <div class="toolProxySubmission" ng-if="tool.latestToolProxySubmission">
                    <a ng-click="tool.tpRequestOpen = !tool.tpRequestOpen"><span ng-if="tool.tpRequestOpen">hide</span><span ng-if="!tool.tpRequestOpen">show latest tool proxy request</span></a>
                    <pre class="toolProxyRequest" ng-if="tool.tpRequestOpen">
                        {{formatJson(tool.latestToolProxySubmission)}}
                    </pre>
                </div>
            </li>
        </ul>
    </div>
</div>
